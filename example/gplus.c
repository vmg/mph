/*
 * d=2
 * n=80
 * m=71
 * c=1.12
 * maxlen=1
 * minklen=2
 * maxklen=13
 * minchar=95
 * maxchar=122
 * loop=0
 * numiter=74363
 * seed=
 */

static int g[] = {
	56, 11, 41, 15, 43, 41, 37, 46, -1, 27,
	41, 39, 28, 26, 70, 59, 32, 4, 45, 59,
	21, 58, 12, 30, 47, -1, 63, 70, 33, 66,
	31, 0, 8, -1, 49, 47, 62, 39, 34, 24,
	-1, 21, 64, 40, 37, 2, 34, 12, 1, 44,
	9, 60, 8, 0, 36, 52, 37, 25, 23, 37,
	52, 65, 28, 57, 32, 65, 38, 33, 50, 45,
	66, 66, -1, 31, 57, 61, 12, 0, 45, 0,
};

static int T0[] = {
	38, 67, 16, 59, 2, 14, 3, 16, 32, 46,
	76, 33, 30, 65, 29, 4, 1, 35, 39, 18,
	28, 67, 9, 38, 67, 7, 70, 26, 
};

static int T1[] = {
	74, 33, 4, 1, 46, 32, 15, 32, 71, 58,
	70, 19, 28, 15, 31, 13, 11, 6, 79, 32,
	39, 47, 44, 6, 73, 16, 49, 29, 
};

#define uchar unsigned char

int
hash(const uchar *key)
{
	unsigned f0, f1;
	const uchar *kp = key;

	for (f0=f1=0; *kp; ++kp) {
		if (*kp < 95 || *kp > 122)
			return -1;
		if (kp-key > 12)
			return -1;
		f0 += T0[-95 + *kp];
		f1 += T1[-95 + *kp];
	}

	if (kp-key < 2)
		return -1;

	f0 %= 80;
	f1 %= 80;

	return (g[f0] + g[f1]) % 71;
}
